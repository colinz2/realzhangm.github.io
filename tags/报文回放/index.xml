<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>报文回放 on zhangm blog</title><link>https://realzhangm.github.io/tags/%E6%8A%A5%E6%96%87%E5%9B%9E%E6%94%BE/</link><description>Recent content in 报文回放 on zhangm blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Copyright © 2018–2022, zhangm; all rights reserved.</copyright><lastBuildDate>Thu, 01 Nov 2018 00:00:00 +0000</lastBuildDate><atom:link href="https://realzhangm.github.io/tags/%E6%8A%A5%E6%96%87%E5%9B%9E%E6%94%BE/index.xml" rel="self" type="application/rss+xml"/><item><title>Tcpreplay使用Netmap发包</title><link>https://realzhangm.github.io/post/tcpreplay%E4%BD%BF%E7%94%A8netmap%E5%8F%91%E5%8C%85/</link><pubDate>Thu, 01 Nov 2018 00:00:00 +0000</pubDate><guid>https://realzhangm.github.io/post/tcpreplay%E4%BD%BF%E7%94%A8netmap%E5%8F%91%E5%8C%85/</guid><description>说明 Tcprepaly是一个报文回放工具，可以将使用 .pcap 文件保存的报文回放。
Tcpreplay默认使用使用的标准的Linux系统API来发包的，发包速度较慢。Netmap是一种高效的收发报文的 I/O 框架，可以使用其API直接在用户态完成数据包到网卡的拷贝，即「内核旁路技术」[1][2]，从而大大提高发包效率。下面介绍了Tcpreplay使用Netmap的编译步骤。关于Tcprepaly和Netmap 的更是信息可以参考各自的官网。
Netmap 1). 下载Netmap代码
git clone https://github.com/luigirizzo/netmap 2). 编译Netmap
./configure --drivers=i40e make 3). 安装Netmap模块
# rmmod i40e # insmod ./netmap.ko # insmod ./i40e/i40e.ko ./configure --drivers=ixgbe # rmmod ixgbe # insmod ./netmap.ko # insmod ./ixgbe/ixgbe.ko Tcpreplay 1). 下载代码
git clone https://github.com/appneta/tcpreplay 2). 编译安装
./configure --with-netmap=/home/zhangm/test/netmap/ make &amp;amp;&amp;amp; make install 3). 使用
使用Tcpreplay时增加 &amp;ndash;netmap 参数, 则使用 Netmap 模式
如:
tcpreplay -i ens1f0 -tK --loop 50000 --netmap /home/zhangm/pcap/bigFlows.</description></item></channel></rss>