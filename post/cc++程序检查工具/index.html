<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>C/C++代码检查&运行时检查工具 - zhangm blog</title><meta name=description content="静态代码检查工具 scan-build 在源码目录下执行make
scan-build make REF http://clang-analyzer.llvm.org/
infer linux下安装 VERSION=0.XX.Y; \ curl -sSL &#34;https://github.com/facebook/infer/releases/download/v$VERSION/infer-linux64-v$VERSION.tar.xz&#34; \ | sudo tar -C /opt -xJ && \ ln -s &#34;/opt/infer-linux64-v$VERSION/bin/infer&#34; /usr/local/bin/infer mac下安装 brew install infer 使用 在源码目录下执行make
infer run -- make 运行时工具 谷歌sanitizers   谷歌sanitizers系列工具用于程序内存分析. (https://github.com/google/sanitizers) sanitizers以库的形式使用. GCC, Clang等编译器都已经集成, 编译程序时使用特定参数(-fsanitize=leak), 会将特定代码自动插入到程序中, 并链接sanitizers库. LeakSanitizer用于内存泄漏分析. GCC5.3以上支持LeakSanitizer.
  例如使用gcc -fsanitize=leak 编译的程序. 通过SIGINT等信号退出程序, 分析结果会自动打印到终端
  查看test进程内存使用大小
cat /proc/pidof test/status | grep VmRSS: REF http://fbinfer.com/docs/getting-started.html
https://github.com/google/sanitizers/wiki"><meta name=author content="realzhangm"><link rel="preload stylesheet" as=style href=https://realzhangm.cn/app.min.css><link rel="preload stylesheet" as=style href=https://realzhangm.cn/an-old-hope.min.css><script defer src=https://realzhangm.cn/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://realzhangm.cn/theme.png><link rel=preload as=image href=https://realzhangm.cn/github.svg><link rel=icon href=https://realzhangm.cn/favicon.ico><link rel=apple-touch-icon href=https://realzhangm.cn/apple-touch-icon.png><meta name=generator content="Hugo 0.96.0"><meta property="og:title" content="C/C++代码检查&运行时检查工具"><meta property="og:description" content="C/C++代码检查&运行时检查工具"><meta property="og:type" content="article"><meta property="og:url" content="https://realzhangm.cn/post/cc++%E7%A8%8B%E5%BA%8F%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-01-14T00:00:00+00:00"><meta property="article:modified_time" content="2018-01-14T00:00:00+00:00"><meta itemprop=name content="C/C++代码检查&运行时检查工具"><meta itemprop=description content="C/C++代码检查&运行时检查工具"><meta itemprop=datePublished content="2018-01-14T00:00:00+00:00"><meta itemprop=dateModified content="2018-01-14T00:00:00+00:00"><meta itemprop=wordCount content="77"><meta itemprop=keywords content="代码检查工具,"><meta name=twitter:card content="summary"><meta name=twitter:title content="C/C++代码检查&运行时检查工具"><meta name=twitter:description content="C/C++代码检查&运行时检查工具"></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=https://realzhangm.cn>zhangm blog</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector(".btn-dark"),sysDark=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark"),setDark=e=>{bodyClx[e?"add":"remove"]("dark"),localStorage.setItem("dark",e?"yes":"no")};setDark(darkVal?darkVal==="yes":sysDark.matches),requestAnimationFrame(()=>bodyClx.remove("not-ready")),btnDark.addEventListener("click",()=>setDark(!bodyClx.contains("dark"))),sysDark.addEventListener("change",e=>setDark(e.matches))</script><nav class=menu><a href=/about/>About</a></nav><nav class=social><a class=github style=--url:url(./github.svg) href=https://github.com/realzhangm target=_blank></a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>2018年1月14日</time>
<span>realzhangm</span></p><h1>C/C++代码检查&运行时检查工具</h1></header><section class=post-content><h2 id=静态代码检查工具>静态代码检查工具</h2><h3 id=scan-build>scan-build</h3><p>在源码目录下执行make</p><pre tabindex=0><code>scan-build make
</code></pre><h5 id=ref>REF</h5><p><a href=http://clang-analyzer.llvm.org/>http://clang-analyzer.llvm.org/</a></p><h3 id=infer>infer</h3><h5 id=linux下安装>linux下安装</h5><pre tabindex=0><code>VERSION=0.XX.Y; \
curl -sSL &#34;https://github.com/facebook/infer/releases/download/v$VERSION/infer-linux64-v$VERSION.tar.xz&#34; \
| sudo tar -C /opt -xJ &amp;&amp; \
ln -s &#34;/opt/infer-linux64-v$VERSION/bin/infer&#34; /usr/local/bin/infer
</code></pre><h5 id=mac下安装>mac下安装</h5><pre tabindex=0><code>brew install infer
</code></pre><h5 id=使用>使用</h5><p>在源码目录下执行make</p><pre tabindex=0><code>infer run -- make
</code></pre><h2 id=运行时工具>运行时工具</h2><h3 id=谷歌sanitizers>谷歌sanitizers</h3><ul><li><p>谷歌sanitizers系列工具用于程序内存分析. (<a href=https://github.com/google/sanitizers>https://github.com/google/sanitizers</a>)
sanitizers以库的形式使用. GCC, Clang等编译器都已经集成, 编译程序时使用特定参数(-fsanitize=leak), 会将特定代码自动插入到程序中, 并链接sanitizers库.
LeakSanitizer用于内存泄漏分析. GCC5.3以上支持LeakSanitizer.</p></li><li><p>例如使用gcc -fsanitize=leak 编译的程序. 通过SIGINT等信号退出程序, 分析结果会自动打印到终端</p></li></ul><p>查看test进程内存使用大小</p><pre tabindex=0><code>cat /proc/pidof test/status | grep VmRSS:
</code></pre><h5 id=ref-1>REF</h5><p><a href=http://fbinfer.com/docs/getting-started.html>http://fbinfer.com/docs/getting-started.html</a></p><p><a href=https://github.com/google/sanitizers/wiki>https://github.com/google/sanitizers/wiki</a></p><h2 id=valgrind>valgrind</h2><pre tabindex=0><code> valgrind ./test  --tool=memcheck  --leak-check=full
</code></pre><h2 id=热点函数检查>热点函数检查</h2><h3 id=gperftools>Gperftools</h3><p><a href=https://github.com/gperftools/gperftools>https://github.com/gperftools/gperftools</a></p><h3 id=linux-perf工具>Linux Perf工具</h3><h5 id=ref-2>REF</h5><p><a href=https://perf.wiki.kernel.org/index.php/Main_Page>https://perf.wiki.kernel.org/index.php/Main_Page</a></p><p><a href=http://www.brendangregg.com/perf.html>http://www.brendangregg.com/perf.html</a></p></section><footer class=post-tags><a href=https://realzhangm.cn/tags/%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7>代码检查工具</a></footer><nav class=post-nav><a class=prev href=https://realzhangm.cn/post/tcpreplay%E4%BD%BF%E7%94%A8netmap%E5%8F%91%E5%8C%85/><span>←</span><span>Tcpreplay使用Netmap发包</span></a></nav></article></main><footer class=footer><p>&copy; 2022 <a href=https://realzhangm.cn>zhangm blog</a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p><p><a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a></p></footer></body></html>